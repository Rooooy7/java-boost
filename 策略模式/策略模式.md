# ç­–ç•¥æ¨¡å¼ Strategy

æœ¬ç¯‡ä¼šä»¥ä¸€ä¸ªé¥²å…»å‘˜çš„é¥²å…»å·¥ä½œä¸ºä¾‹ï¼Œä¸€æ­¥æ­¥ç åˆ°ä½¿ç”¨ç­–ç•¥æ¨¡å¼è§£å†³å®é™…é—®é¢˜ã€‚

é¦–å…ˆæˆ‘ä»¬çœ‹çœ‹é‡åˆ°ç±»ä¼¼å¦‚ä¸‹çš„é—®é¢˜æ—¶ï¼Œè¯¥æ€ä¹ˆåŠã€‚

1. æœ‰å¤šç§ç±»åˆ«çš„å¤šä¸ªå® ç‰©éœ€è¦å–‚é£Ÿã€‚
2. åªæœ‰ä¸€ä¸ªäººï¼ˆå¯¹è±¡ï¼‰çŸ¥é“ä¸åŒå® ç‰©åº”è¯¥æ ¹æ®å®ƒçš„ä½“é‡å–‚å¤šå°‘é£Ÿç‰©ã€‚



## ä¸€ç›´è†¨èƒ€çš„é¥²å…»å‘˜

æœ€ç›´æ¥çš„å®ç°æ–¹å¼ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªFeederç±»ï¼ˆé¥²å…»å‘˜ï¼‰ã€‚åœ¨é‡Œé¢å®ç°ä¸€ä¸ªFeedå–‚é£Ÿæ–¹æ³•ï¼Œç„¶ååœ¨å–‚é£Ÿæ—¶ï¼Œæ ¹æ®å® ç‰©ç§ç±»å’Œä½“é‡å†³å®šå–‚é£Ÿé‡ã€‚

```java
public class Feeder {
    public void feed(Cat cat) {
        System.out.println("æˆ‘å–‚é£Ÿäº†" + cat.getName() + " " + 						getCatFoodAmount(cat) + "æ–¤é£Ÿç‰©");
    }

    public Integer getCatFoodAmount(Cat cat) {
        Integer weight = cat.getWeight();
        return weight/2;
    }

    // è¾“å‡ºç»“æœ
    // æˆ‘å–‚é£Ÿäº†Tom 4æ–¤é£Ÿç‰©
    public static void main(String[] args) {
        Cat tom = new Cat("Tom", 8);
        Feeder feeder = new Feeder();
        feeder.feed(tom);
    }
}
```

ä¸Šé¢çš„ä»£ç å¾ˆç›´æ¥ã€‚**ä½†æ˜¯è¿™æ ·åšåœ¨æ‹“å±•æ—¶å°±ä¼šå‡ºç°é—®é¢˜äº†**ã€‚å¦‚æœé¥²å…»å‘˜ä»¥åè¦å–‚ç‹—ç‹—ï¼Œè¦å–‚ç†ŠçŒ«ï¼Œè¦å–‚è¥¿å‡ ï¼Œè¦å–‚è„‘æ–§ï¼Œ**å°±å¾—ä¸€ç›´å¾€Feederç±»ä¸­å†™å…¥feedçš„é‡è½½æ–¹æ³•å’ŒgetXXXFoodWeightæ–¹æ³•ã€‚é¥²å…»å‘˜ç±»å°±é€æ¸å˜æˆäº†ä¸ªèƒ–å­ã€‚å¤ªä¸ä¼˜é›…äº†ã€‚**

é‚£ä¹ˆå¦‚ä½•è§£å†³é¥²å…»å‘˜æ—¥ç›Šè†¨èƒ€é—®é¢˜ ğŸ˜…ï¼Ÿ

## è®©åŠ¨ç‰©è¯´è¯

é¦–å…ˆæˆ‘ä»¬æŠŠè®¡ç®—çš„æ–¹æ³•äº¤ç»™å® ç‰©è‡ªå·±ã€‚

å® ç‰©ä¸ä¼šè¯´è¯ï¼Œä½†æ˜¯ä»–ä»¬ä¼šåƒä¸œè¥¿ï¼Œè€Œä¸”çŸ¥é“è‡ªå·±æœ€å¤šèƒ½åƒå¤šå°‘ï¼ˆç†æƒ³æƒ…å†µï¼‰ã€‚

æ‰€ä»¥ï¼Œè®©å® ç‰©ï¼ˆç±»ï¼‰å‘Šè¯‰æˆ‘ä»¬èƒ½åƒå¤šå°‘å°±å¯ä»¥äº†ã€‚ä¸éœ€è¦è®©é¥²å…»å‘˜è‡ªå·±å»ç®—ã€‚

```java
public class Cat {
    /** åå­— */
    private String name;

    /** ä½“é‡ï¼Œæ–¤ */
    private Integer weight;

    public Cat(String name, Integer weight) {
        this.name = name;
        this.weight = weight;
    }

    /** è®¡ç®—é£Ÿé‡ */
    public Integer getMaxFoodAmount() {
        return this.weight/2;
    }
	// éšè—äº†getter setter
}
```

è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¸®feederå‡è‚¥äº†ï¼

```java
public class Feeder {
    // cat.getFoodWeight() çŒ«å’ªå·²ç»çŸ¥é“è‡ªå·±è¦åƒå¤šå°‘äº†ï¼
    public void feed(Cat cat) {
        System.out.println("æˆ‘å–‚é£Ÿäº†" + cat.getName() + " " + 						cat.getMaxFoodAmount() + "æ–¤é£Ÿç‰©");
    }
}
```

## ä¸€è§†åŒä»

è¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼Œé¥²å…»å‘˜å–‚ç‹—ç‹—ï¼Œè¿˜è¦é‡è½½feedï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå–‚ç‹—ç‹—çš„å§¿åŠ¿è¿˜è·Ÿå–‚çŒ«å’ªçš„å§¿åŠ¿ä¸å¤ªä¸€æ ·ï¼Œæ‹“å±•èµ·æ¥ä¹Ÿä¸ä¼˜é›…ï¼Œä»–ä»¬æ˜æ˜éƒ½æ˜¯å® ç‰©å¯¹å§ã€‚

é¥²å…»å‘˜åº”è¯¥è¦å­¦ä¼šä¸€è§†åŒä»ã€‚

### ä»–ä»¬éƒ½æœ‰åŒæ ·çš„å±æ€§

æˆ‘ä»¬æŠŠçŒ«çŒ«ç‹—ç‹—**æŠ½è±¡**å‡ºæ¥ä¸€ä¸ªç±»Animalï¼Œä»–ä»¬æœ‰åå­—ï¼Œä½“é‡2ä¸ªå…±é€šå±æ€§ã€‚

é‚£ä¹ˆAnimalçš„è®¾è®¡å°±æœ‰äº†

```java
public abstract class Animal implements Feedable {
    /** åå­— */
    private String name;

    /** ä½“é‡ï¼Œæ–¤ */
    private Integer weight;

    public String getName() {return name;}

    public void setName(String name) {this.name = name;}

    public Integer getWeight() {return weight;}

    public void setWeight(Integer weight) {this.weight = weight;}

}
```

### ä»–ä»¬éƒ½æœ‰åŒæ ·çš„åŠŸèƒ½

ä¸Šä¸€æ®µè®²è¿‡äº†ï¼Œä½œä¸ºä¸€ä¸ªAnimalï¼Œä»–ä»¬éƒ½çŸ¥é“è‡ªå·±æœ€å¤šèƒ½åƒå¤šå°‘ï¼Œè€Œä¸”ä»–ä»¬æ¥å—å–‚é£Ÿã€‚é‚£ä¹ˆä»–ä»¬åº”è¯¥æœ‰ä¸€ä¸ªå…±é€šçš„å–‚é£Ÿæ¥å£ï¼Œè€Œä¸”èƒ½å‘Šè¯‰é¥²å…»å‘˜ä»–ä»¬èƒ½åƒå¤šå°‘ã€‚

å†™ä¸€ä¸ªæ¥å£Feedableï¼Œå¹¶å†™ä¸€ä¸ªè·å¾—æœ€å¤§å–‚é£Ÿé‡çš„æ–¹æ³•ã€‚

```java
public interface Feedable {
    // è·å¾—è®¡ç®—é£Ÿé‡æ¥å£
    Integer getMaxFoodAmount();
}
```

çŒ«å’ªç±»å¯ä»¥ç®€åŒ–å¹¶å®ç°è·å¾—é£Ÿé‡çš„æ–¹æ³•äº†ï¼

```java
public class Cat extends Animal {
    // name weight å±æ€§ éƒ½åœ¨ Animal é‡Œ
    public Cat(String name, Integer weight) {
        super.setName(name);
        super.setWeight(weight);
    }

    /** å®ç°è®¡ç®—é£Ÿé‡ */
    @Override
    public Integer getMaxFoodAmount() {
        return this.getWeight()/2;
    }
}
```

åŒç†ç‹—ä¹Ÿæ˜¯è¿™ä¹ˆå†™ï¼Œå¹¶ä¸”Dogç±»è‡ªå·±å®ç°ä»–çš„getMaxFoodAmountæ–¹æ³•ï¼Œå¯ä»¥æ˜¯return this.getWeight();ã€‚ç‹—ç‹—è¦åƒå¤šç‚¹ã€‚

ä¸ºä»€ä¹ˆAnimalä½¿ç”¨äº†æŠ½è±¡ç±»ï¼Œä¸»è¦æˆ‘ä»¬è®¾è®¡Animalæ˜¯ä¸ºäº†æŠ½è±¡å‡ºæ¦‚å¿µï¼Œæ¯•ç«Ÿæˆ‘ä»¬æ²¡æœ‰å¿…è¦ä¹Ÿä¸åº”è¯¥è®©å…¶ä»–é¡¹ç›®ç¨‹åºå‘˜newå‡ºä¸€ä¸ªAnimalç±»ã€‚

*å…¶å®å®Œå…¨ä¹Ÿå¯ä»¥åœ¨æŠ½è±¡ç±»ä¸­å†™å…¥æœªå®ç°çš„æ–¹æ³•ï¼Œè®©å­ç±»å®ç°ã€‚ä½†ä½¿ç”¨æ¥å£å®ç°çœ‹ä¸Šå»ç›´è§‚ä¸€äº›ï¼Œä¹Ÿæ–¹ä¾¿æœªæ¥å¤ç”¨ï¼ˆå¦‚æœéœ€è¦ï¼‰*

**å¦‚æ­¤ä¸€æ¥ï¼Œfeederå°±è¢«èµ‹äºˆäº†ä¸€ç§æ–°èƒ½åŠ›ï¼Œåªè¦æ˜¯ä¸ªAnimalç±»ï¼Œæˆ‘éƒ½èƒ½å–‚ã€‚**

```java
public class Feeder {
    public void feed(List<Animal> animalList) {
        for (Animal animal : animalList) {
            System.out.println("æˆ‘å–‚é£Ÿäº†" + animal.getName() + " " + 						animal.getMaxFoodAmount() + "æ–¤é£Ÿç‰©");
        }
    }
}
```



## åŠ¨ç‰©å›­å›­é•¿çš„æ–°éœ€æ±‚

ç°åœ¨é¥²å…»å‘˜Feederå¯ä»¥å¾ˆè½»æ¾çš„å–‚å…»å„ç±»çš„åŠ¨ç‰©äº†ã€‚æ¯ç§åŠ¨ç‰©ä¹Ÿä¼šâ€å‘Šè¯‰â€œé¥²å…»å‘˜ä»–è‡ªå·±è¯¥åƒå¤šå°‘ã€‚ä½†æ˜¯åŠ¨ç‰©å›­å›­é•¿å´æå‡ºäº†æ–°çš„éœ€æ±‚ã€‚



**å›­é•¿ï¼šæˆ‘ä»¬é¢„ç®—æœ‰é™å•Šï¼Œä½ è€å–‚é‚£ä¹ˆå¤šï¼Œæˆ‘ä»¬å›­éƒ½è¦ç»™ä½ å–‚ç ´äº§äº†ã€‚**



ç¡®å®ï¼Œä¹Ÿä¸èƒ½æ¯æ¬¡éƒ½å–‚ä¸€ç§åŠ¨ç‰©çš„å›ºå®šé£Ÿé‡ï¼Œå‡å¦‚å®ƒæ€€å­•äº†å‘¢æˆ–è€…ç—…äº†ï¼Œé£Ÿé‡ä¹Ÿä¼šæ”¹å˜å¯¹å§ã€‚**å› æ­¤é¥²å…»å‘˜æ¥æ§åˆ¶é…é£Ÿæ–¹æ¡ˆæ¯”è¾ƒç¨³å¦¥ã€‚**

ä½†æ˜¯æˆ‘ä»¬ä¸Šé¢ä¸å°±å·²ç»å†™è¿‡ä¸€ç§é¥²å…»å‘˜æ§åˆ¶çš„ç‰ˆæœ¬äº†ï¼Œé‚£ç»“æœä¼šå¯¼è‡´é¥²å…»å‘˜ä¼šè¶Šæ¥è¶Šè‚¥ã€‚

*ä½†è¿™æ¬¡æˆ‘ä»¬æ¢ç§å†™æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚*

### æœ‰æ—¶å€™è¦æ…ç”¨ç»§æ‰¿

é¦–å…ˆï¼Œæˆ‘è¯´æ˜ä¸€ä¸ªäº‹æƒ…ã€‚

ç”±äºæˆ‘ä»¬ä¸€å¼€å§‹è®¾è®¡ä¸€ä¸ªé¥²å…»å‘˜å¯ä»¥å–‚ä¸åŒç§ç±»çš„åŠ¨ç‰©ã€‚ä½†å¦‚ä»Šæ¯ç§åŠ¨ç‰©éƒ½è¦åˆ†å¼€ç­–åˆ’äº†ï¼Œäºæ˜¯æˆ‘åªå¥½ç»§ç»­å†™å­˜åœ¨ä¸€ç§**â€è¶…çº§é¥²å…»å‘˜â€œï¼Œä»–å¯ä»¥å–‚ä¸åŒç§ç±»çš„åŠ¨ç‰©ã€‚**

*ï¼ˆä¸»è¦æ˜¯å› ä¸ºæˆ‘è®¾è®¡äº†Animalè¿™ä¸ªæŠ½è±¡ç±»ï¼Œå¯¼è‡´äº†æ¯ç§ç»§æ‰¿å®ƒçš„åŠ¨ç‰©éƒ½äº§ç”Ÿäº†å¼ºè€¦åˆï¼Œæ‰€ä»¥æœ‰æ—¶å€™è¿˜æ˜¯å¾—æ…ç”¨ç»§æ‰¿å•Šï¼ï¼‰*



### é¥²å…»å‘˜çš„æ–°æ€è·¯

æ—¢ç„¶åˆ°é¥²å…»å‘˜è‡ªå·±å†³å®šäº†ï¼Œé‚£ä¹ˆé¥²å…»å‘˜åº”è¯¥å…ˆå†™ä¸‹ä»–å¯¹æ¯ç§ä¸åŒåŠ¨ç‰©çš„ä¸åŒå–‚é£Ÿç­–ç•¥ä¹¦**ï¼ˆæœ€å¥½è¿˜è¦å†™ä¸€ä»½é»˜è®¤ç­–ç•¥ï¼‰**ã€‚

æ¯ç§ç­–ç•¥éƒ½æ˜¯ä¸€ä¸ªå–‚é£Ÿç­–ç•¥ï¼Œéƒ½éœ€è¦æœ‰ä¸€ä¸ªè·å–é£Ÿé‡æ–¹æ³•ã€‚è¿™ç‚¹æˆ‘ä»¬ä½¿ç”¨æ¥å£ç‰¹æ€§ï¼Œåˆšå¥½å¥‘åˆæˆ‘ä»¬çš„ç­–ç•¥æ¦‚å¿µã€‚

å…ˆå®šä¹‰ç­–ç•¥æ¥å£ï¼Œ**é€šè¿‡è®¾è®¡ä¼ å…¥æ³›å‹ï¼Œè®©æ¥å£å®ç°ä¸­å¯ä»¥æ“ä½œTç±»å¯¹è±¡ï¼Œæ›´çµæ´»**

```java
public interface FeedStrategy<T> {
    Integer getFoodAmount(T a);
}
```

ç„¶åå®šä¹‰é»˜è®¤ç­–ç•¥å’Œå„ç§åŠ¨ç‰©çš„ç­–ç•¥

```java
public class DefaultFeedStrategy implements FeedStrategy<Animal> {
    @Override
    public Integer getFoodAmount(Animal animal) {
        return animal.getWeight()/2;
    }
}
```

çŒ«çŒ«ç‹—ç‹—ç­–ç•¥

```java
public class CatFeedStrategy implements FeedStrategy<Cat> {

    @Override
    public Integer getFoodAmount(Cat a) {
        return 1;
    }
}

public class DogFeedStrategy implements FeedStrategy<Dog> {

    @Override
    public Integer getFoodAmount(Dog a) {
        return 2;
    }
}
```

ä¸ºäº†æ›´å¥½çš„åŒºåˆ†æ¯ç§Animalçš„ç±»åˆ«ï¼Œ**ä»¥ä¾¿è®©ç¨‹åºè‡ªåŠ¨é€‰æ‹©ç­–ç•¥ï¼Œæˆ‘ä»¬åŠ å…¥äº†ä¸€ä¸ªåŠ¨ç‰©æšä¸¾ç±»ï¼Œå¹¶åœ¨æ¯ç§åŠ¨ç‰©åˆå§‹åŒ–æ—¶ä¹Ÿåˆå§‹åŒ–ä»–ä»¬çš„ç±»å‹**

```java
public enum AnimalEnum {
    CAT("cat","çŒ«å’ª", new CatFeedStrategy()),
    DOG("dog","ç‹—ç‹—", new DogFeedStrategy()),
    BIRD("bird","é¸Ÿå„¿", new DefaultFeedStrategy()),
    TURTLE("turtle","ä¹Œé¾Ÿ", new DefaultFeedStrategy());
    String type;
    String name;
    // æŠŠç­–ç•¥ä¹Ÿæ”¾è¿›å»ä½œä¸ºæšä¸¾å…ƒç´ çš„å†…å®¹ï¼Œæ–¹é¢åé¢å¤„ç†
    FeedStrategy feedStrategy;

    AnimalEnum(String type, String name, FeedStrategy feedStrategy) {
        this.type = type;
        this.name = name;
        this.feedStrategy = feedStrategy;
    }
}
```

åœ¨åˆ›å»ºçŒ«çŒ«ç‹—ç‹—æ—¶ï¼Œåˆå§‹åŒ–ä»–ä»¬çš„ç±»åˆ«

```java
public class Cat extends Animal {
    public Cat(String name, Integer weight) {
        super.setName(name);
        super.setWeight(weight);
        // åˆå§‹åŒ–type -- æšä¸¾ç±»
        super.setType(AnimalEnum.CAT);
    }

    /** å®ç°è®¡ç®—é£Ÿé‡ */
    @Override
    public Integer getMaxFoodAmount() {
        return this.getWeight()/2;
    }
}
```

ç­–ç•¥å®šä¹‰å¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨æ¥ç»™æˆ‘ä»¬çš„é¥²å…»å‘˜å‡çº§ä¸€ä¸‹

**é¥²å…»å‘˜ä¹Ÿé‡‡å–äº†æ³›å‹å†™æ³•ï¼ŒåŸå› æ˜¯æˆ‘ä»¬å»ºè®®å…¶ä»–ä½¿ç”¨è€…æŒ‡å®šé¥²å…»å‘˜çš„é¥²å…»åŠ¨ç‰©ç§ç±»ã€‚å¦‚æœä»–éè¦ä½¿ç”¨Feeder<Animal> æˆ‘ä»¬ä¹Ÿæœ‰åº”å¯¹æ–¹æ³•**

```java
public class Feeder<T extends Animal> {
	//ä¸»è¦å–‚é£Ÿæ–¹æ³•
    // è¾“å‡ºï¼šæˆ‘å–‚é£Ÿäº†YY: XXXï¼ˆaæ–¤ï¼‰ï¼Œbæ–¤é£Ÿç‰©
    public void feed(Animal animal, FeedStrategy f) {
        if (f == null) {
            f = new DefaultFeedStrategy();
        }
        StringBuilder sb = new StringBuilder();
        sb.append("æˆ‘å–‚é£Ÿäº†").append(animal.getType().name).append(": ").append(animal.getName()).append("ï¼ˆ").append(animal.getWeight()).append("æ–¤ï¼‰ï¼Œ").append(f.getFoodAmount(animal)).append("æ–¤é£Ÿç‰©");
        System.out.println(sb.toString());
    }

    // æŒ‡å®šç­–ç•¥
    public void feed(List<T> animals, FeedStrategy f) {
        for (T animal: animals) {
            feed(animal, f);
        }
    }

    // æ ¹æ®åŠ¨ç‰©ç±»å‹è‡ªåŠ¨é€‰æ‹©ç­–ç•¥
    public void feed(List<T> animals) {
        // ä½¿ç”¨streamæµæ¥ç»™ä¼ å…¥çš„animalsæŒ‰typeåˆ†ç»„ï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Œæ˜¯å› ä¸ºé˜²æ­¢æœ‰äººåˆ›å»ºnew feeder<Animal>å¹¶ä¼ å…¥ List<Animal>
        // è¿™é‡Œå±äºâ€è®¾è®¡ç¼ºé™·â€œï¼Œæ‰è¿™æ ·å¤„ç†
        Map<AnimalEnum, List<T>> animalMap = animals.stream().collect(Collectors.groupingBy(a -> a.getType()));
        animalMap.entrySet().stream().forEach(es -> feed(es.getValue(), es.getKey().feedStrategy));
        // ä¸Šé¢ä¸€å¥å’Œä¸‹é¢ä¸€æ®µforä»£ç å—çš„æ‰§è¡Œé€»è¾‘æ˜¯ä¸€æ ·çš„
        //for (Map.Entry<AnimalEnum, List<T>> a : animalMap.entrySet()) {
        //    feed(a.getValue(), a.getKey().feedStrategy);
        //}
    }
}
```



å¤§åŠŸå‘Šæˆã€‚ç°åœ¨çš„é¥²å…»å‘˜å·²ç»æœ‰äº†ä¸€æœ¬AnimalEnumå–‚å…»ä¸“ä¸šä¹¦ï¼Œå‘Šè¯‰ä»–æ€ä¹ˆå–‚ä»»ä½•ä¸€ç§å® ç‰©ã€‚



## è¿˜æœ‰ä¸€äº›è¦æ³¨æ„çš„åœ°æ–¹

### é¥²å…»æŒ‡æŒ¥éƒ¨ -- StrategyContext ç­–ç•¥ä¸Šä¸‹æ–‡

å¾€å¾€åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¼šå­˜åœ¨ä¸€ä¸ªç­–ç•¥ä¸Šä¸‹æ–‡Contextï¼ŒæœåŠ¡ç«¯åœ¨é‡Œé¢åˆ†æå®¢æˆ·ç«¯è¡Œä¸ºï¼Œæœ€ç»ˆå†³å®šæ‰§è¡Œç­–ç•¥ã€‚

è€Œåœ¨ä¸Šæ–‡çš„ä¾‹å­ä¸­ï¼Œæ²¡æœ‰è¿™æ ·çš„è®¾è®¡ï¼ŒåŸå› æ˜¯æˆ‘ä»¬ç”¨AnimalEnumæšä¸¾ç±»çš„ç‰¹æ€§ä»£æ›¿äº†ä»–ï¼Œåœ¨æ‰§è¡Œç­–ç•¥è¶Šæ¥è¶Šå¤æ‚ä»¥åï¼Œè®¾è®¡ä¸€ä¸ªcontextèƒ½æ›´æœ‰æ•ˆæ¸…æ™°çš„è§£å†³ç­–ç•¥é€‰æ‹©é—®é¢˜ã€‚

### ç­–ç•¥çœŸçš„éœ€è¦é‚£ä¹ˆå¤šå®ä¾‹å— -- lambda å’Œ ç­–ç•¥å•ä¾‹

#### ç­–ç•¥å•ä¾‹

ä¸€å¼€å§‹æˆ‘å†™çš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡ä¸‹é¢çš„æ–¹å¼å†™çš„ï¼Œä½ ä»¬å“å“

```java
switch (animal.getType()) {
                case CAT:
                    f = new CatFeedStrategy();
                    break;
                case DOG:
                    f = new DogFeedStrategy();
                    break;
                case BIRD:
                    f = new DefaultFeedStrategy();
                    break;
                case TURTLE:
                    f = new DefaultFeedStrategy();
                    break;
    			default:
        			f = new DefaultFeedStrategy();
}
```

åˆæ˜¯GCè¢«è¿«è¥ä¸šçš„ä¸€æ•´å¤©ã€‚new è¿™ä¹ˆå¤šç­–ç•¥å‡ºæ¥ï¼Œæ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰çš„ã€‚äºæ˜¯æˆ‘æƒ³åˆ°äº†ä¸Šä¸€ç¯‡å•ä¾‹æ¨¡å¼æ–‡ç« é‡Œçš„æœ€åä¸€ä¸ªæšä¸¾å•ä¾‹ã€‚

> äºæ˜¯æˆ‘æƒ³åˆ°äº†ä¸Šä¸€ç¯‡å•ä¾‹æ¨¡å¼æ–‡ç« é‡Œçš„æœ€åä¸€ä¸ªæšä¸¾å•ä¾‹ã€‚
>
> å•ä¾‹æ¨¡å¼ï¼šhttps://www.cnblogs.com/roy7sang/p/13585578.html

åˆšå¥½æˆ‘åˆä½¿ç”¨äº†æšä¸¾ï¼Œæ—¢ç„¶æ¯ä¸ªæšä¸¾å…ƒç´ éƒ½æ˜¯å•ä¾‹çš„ï¼Œé‚£ä¹ˆå®ƒçš„å±æ€§åº”è¯¥ä¹Ÿæ˜¯å•ä¾‹çš„***ï¼ˆè¿™ä¸ªæˆ‘è¿˜æ²¡æœ‰éªŒè¯ï¼Œæˆ‘å¤§æ¦‚ç‡ä¼°è®¡æ˜¯ï¼‰***ã€‚

**ä¸¾è¿™ä¸ªä¾‹å­æ˜¯å¸Œæœ›æé†’ä½¿ç”¨è€…ï¼Œä¸è¦ç–¯ç‹‚new å‡ºç­–ç•¥æ¥ä½¿ç”¨ï¼Œåº”è¯¥æƒ³åŠæ³•ä½¿ç”¨å•ä¾‹ç­–ç•¥æ¥è§£å†³ã€‚**

#### lambdaè¡¨è¾¾å¼

å¦å¤–è¿™ç§æ¥å£å®ç°æ–¹å¼çš„ç­–ç•¥ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥å®ç°æ¥å£ã€‚æ¯”å¦‚ 

```java
feeder.feed(animalList, animal -> animal.getWeight()/2);
```

ä¸ç”¨ä½ å†å»å†™ä¸ªç­–ç•¥ç±»

### ç­–ç•¥æ¨¡å¼ä¼˜ç¼ºç‚¹

#### ä¼˜ç‚¹

- æœ€å¤§çš„ä¼˜ç‚¹å½“ç„¶æ˜¯çµæ´»ï¼Œé¢å¯¹ä¸åŒçš„éœ€æ±‚å’Œæƒ…å†µï¼Œåšå‡ºä¸åŒçš„ç­–ç•¥å›åº”
- æå‡ä»£ç å¯è¯»æ€§ï¼ŒåŠ å¼ºäº†å¯æ‹“å±•æ€§

#### ç¼ºç‚¹

- å½“ç­–ç•¥ç±»è¶Šæ¥è¶Šå¤šï¼Œéœ€è¦åˆ›å»ºçš„ç­–ç•¥ç±»ä¹Ÿä¼šå˜å¤š
- ç­–ç•¥ç±»å¾€å¾€éƒ½æ˜¯å¯¹å¤–æš´éœ²çš„